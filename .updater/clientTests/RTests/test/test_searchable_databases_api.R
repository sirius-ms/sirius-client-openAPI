# Automatically generated by openapi-generator (https://openapi-generator.tech)
# Please update as you see appropriate

context("Test SearchableDatabasesApi")

api_instance <- SearchableDatabasesApi$new()
path_to_demo_data <- paste(Sys.getenv("HOME"), "sirius-client-openAPI/.updater/clientTests/Data", sep="/")
test_file = paste(path_to_demo_data, "Kaempferol.ms", sep="/")

test_that("AddDatabases", {
  # tests for AddDatabases
  # base path: http://localhost:8080
  # @param request_body array[character] 
  # @return [array[SearchableDatabase]]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("CreateDatabase", {
  # tests for CreateDatabase
  # base path: http://localhost:8080
  # @param database_id character 
  # @param searchable_database_parameters SearchableDatabaseParameters  (optional)
  # @return [SearchableDatabase]

  db_name <- "CreateDatabase"

  response <- api_instance$CreateDatabase(db_name)
  expect_true(inherits(response, "SearchableDatabase"))

  withr::defer(api_instance$RemoveDatabase(db_name))
})

test_that("GetCustomDatabases", {
  # tests for GetCustomDatabases
  # base path: http://localhost:8080
  # @param include_stats character  (optional)
  # @return [array[SearchableDatabase]]

  db_name <- "GetCustomDatabases"
  api_instance$CreateDatabase(db_name)

  response <- api_instance$GetCustomDatabases()
  expect_true(inherits(response, "list"))
  expect_true(inherits(response[[1]], "SearchableDatabase"))

  withr::defer(api_instance$RemoveDatabase(db_name))
})

test_that("GetDatabase", {
  # tests for GetDatabase
  # base path: http://localhost:8080
  # @param database_id character 
  # @param include_stats character  (optional)
  # @return [SearchableDatabase]

  db_name <- "GetDatabase"
  api_instance$CreateDatabase(db_name)

  response <- api_instance$GetDatabase(db_name)
  expect_true(inherits(response, "SearchableDatabase"))

  withr::defer(api_instance$RemoveDatabase(db_name))
})

test_that("GetDatabases", {
  # tests for GetDatabases
  # base path: http://localhost:8080
  # @param include_stats character  (optional)
  # @return [array[SearchableDatabase]]

  response <- api_instance$GetIncludedDatabases()
  expect_true(inherits(response, "list"))
  expect_true(inherits(response[[1]], "SearchableDatabase"))
})

test_that("GetIncludedDatabases", {
  # tests for GetIncludedDatabases
  # base path: http://localhost:8080
  # @param include_stats character  (optional)
  # @return [array[SearchableDatabase]]

  response <- api_instance$GetIncludedDatabases()
  expect_true(inherits(response, "list"))
  expect_true(inherits(response[[1]], "SearchableDatabase"))
})

test_that("ImportIntoDatabase", {
  # tests for ImportIntoDatabase
  # base path: http://localhost:8080
  # Start import of structure and spectra files into the specified database.
  # Start import of structure and spectra files into the specified database.
  # @param database_id character database to import into
  # @param buffer_size integer  (optional)
  # @param input_files array[data.frame]  (optional)
  # @return [SearchableDatabase]

#   # TODO broken
#   db_name <- "ImportIntoDatabase"
#   api_instance$CreateDatabase(db_name)
#
#   response <- api_instance$ImportIntoDatabase(db_name, input_files=c(test_file))
#   expect_true(inherits(response, "SearchableDatabase"))
#
#   withr::defer(api_instance$RemoveDatabase(db_name))
})

test_that("ImportIntoDatabaseAsJob", {
  # tests for ImportIntoDatabaseAsJob
  # base path: http://localhost:8080
  # Start import of structure and spectra files into the specified database.
  # Start import of structure and spectra files into the specified database.
  # @param database_id character database to import into
  # @param buffer_size integer  (optional)
  # @param opt_fields array[JobOptField] set of optional fields to be included. Use 'none' only to override defaults. (optional)
  # @param input_files array[data.frame]  (optional)
  # @return [Job]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("RemoveDatabase", {
  # tests for RemoveDatabase
  # base path: http://localhost:8080
  # @param database_id character 
  # @param delete character  (optional)
  # @return [Void]

  db_name <- "RemoveDatabase"
  api_instance$CreateDatabase(db_name)

  response <- api_instance$RemoveDatabase(db_name)

  expect_true(is.null(response))
})

test_that("UpdateDatabase", {
  # tests for UpdateDatabase
  # base path: http://localhost:8080
  # @param database_id character 
  # @param searchable_database_parameters SearchableDatabaseParameters  (optional)
  # @return [SearchableDatabase]

#   # TODO java.lang.UnsupportedOperationException: Updating Custom databases is not yest supported
#   db_name <- "UpdateDatabase"
#   api_instance$CreateDatabase(db_name)
#
#   response <- api_instance$UpdateDatabase(db_name)
#
#   expect_true(inherits(response, "SearchableDatabase"))
})
